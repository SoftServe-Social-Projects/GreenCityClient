<div [formGroup]="dateForm" class="date-location-container">
  <div class="date-container">
    <div class="date-time">
      <span class="day">{{ dayNumber + 1 }} {{ 'create-event.day' | translate }}</span>
      <mat-form-field appearance="outline" class="date">
        <mat-label>{{ 'create-event.choose-date' | translate }}</mat-label>
        <input
          [matDatepickerFilter]="dateFilterBind"
          [matDatepicker]="picker"
          [min]="today"
          autocomplete="false"
          formControlName="date"
          matInput
          ngDefaultControl
        />
        <mat-datepicker-toggle [for]="picker" matSuffix></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error>{{ 'create-event.date-error' | translate }}</mat-error>
        <mat-hint>MMDDYYYY</mat-hint>
      </mat-form-field>

      <ng-container formGroupName="timeRange">
        <div class="time">
          <mat-form-field appearance="outline" class="time-item">
            <mat-label>{{ 'create-event.set-start-time' | translate }}</mat-label>
            <input [matAutocomplete]="startOptions" formControlName="startTime" matInput maxlength="5" />
            <mat-autocomplete #startOptions="matAutocomplete">
              <mat-option *ngFor="let time of startOptionsArr" [value]="time">
                {{ time }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

          <h5 class="dash">â€”</h5>

          <mat-form-field appearance="outline" class="time-item">
            <mat-label>{{ 'create-event.set-end-time' | translate }}</mat-label>
            <input [matAutocomplete]="endOptions" formControlName="endTime" matInput maxlength="5" />
            <mat-autocomplete #endOptions="matAutocomplete">
              <mat-option *ngFor="let time of endOptionsArr" [value]="time">
                {{ time }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>
      </ng-container>

      <mat-checkbox (change)="toggleAllDay()" class="mr-2" color="primary" formControlName="allDay"
        >{{ 'create-event.all-day' | translate }}
      </mat-checkbox>
      <div class="checkbox">
        <mat-checkbox
          (change)="toggleLocation()"
          [checked]="placeSelected"
          [disabled]="isPlaceDisabled"
          class="checkbox-wrapper"
          color="primary"
        >
          {{ 'create-event.event-place' | translate }}
        </mat-checkbox>
        <mat-checkbox (change)="toggleOnline()" [checked]="isOnline" [disabled]="isLinkDisabled" class="checkbox-wrapper" color="primary">
          {{ 'create-event.event-online' | translate }}
        </mat-checkbox>
      </div>
    </div>
  </div>

  <div *ngIf="placeSelected" class="active">
    <p class="regular-text mb-2">{{ 'create-event.event-location' | translate }}</p>
    <div class="location-title">
      <mat-form-field appearance="outline" class="location-title-input" subscriptSizing="dynamic">
        <mat-label>{{ 'create-event.event-offline-place' | translate }}</mat-label>
        <input #placesRef formControlName="place" matInput placeholder="{{ 'create-event.enter-location' | translate }}" />
        <mat-error> {{ 'create-event.location-required' | translate }}</mat-error>
      </mat-form-field>
      <mat-checkbox
        (change)="toggleForAllLocations()"
        *ngIf="isLocationSelected && dayNumber === 0"
        [checked]="appliedForAllLocations"
        [color]="'primary'"
        class="apply-location-checkbox"
      >
        {{ 'create-event.apply-location' | translate }}
      </mat-checkbox>
    </div>

    <div *ngIf="!isLocationDisabled" class="map-container">
      <google-map (mapClick)="mapClick($event)" [options]="mapOptions" [width]="'100%'" height="410px">
        <map-marker [position]="mapMarkerCoords" />
      </google-map>
    </div>
  </div>

  <div *ngIf="isOnline" class="d-flex flex-column w-100">
    <p class="regular-text mb-2">{{ 'create-event.event-link' | translate }}</p>
    <mat-form-field appearance="outline" class="link-title" subscriptSizing="dynamic">
      <mat-label class="link-title">{{ 'create-event.event-online-link' | translate }}</mat-label>
      <input formControlName="onlineLink" matInput placeholder="{{ 'create-event.enter-link' | translate }}" />
      <mat-error> {{ 'create-event.event-online-link-error' | translate }}</mat-error>
    </mat-form-field>
    <mat-checkbox
      (change)="toggleForAllLink()"
      *ngIf="this.dayNumber === 0"
      [checked]="this.appliedForAllLink"
      class="apply-location-checkbox"
      color="primary"
    >
      {{ 'create-event.apply-location' | translate }}
    </mat-checkbox>
  </div>
</div>
